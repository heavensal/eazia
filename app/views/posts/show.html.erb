  <%# Test des photos sélectionnées pour vérifier les correspondances %>
  <%# ENLEVER quand il y aura un front pour les images sélectionnées %>
  <%= @post.photos_selected %>
  <% @post.photos_selected.each do |id| %>
    <% photo = @post.photos.find(id) %>
    <%= cl_image_tag photo.key, loading: "lazy", width:50, height: 50 %>
  <% end %>

<div class="show">

  <%# TRES IMPORTANT: Canal de diffusion des changements d'images %>
  <%= turbo_stream_from "post_#{@post.id}" %>


  <div class="creation">

     <div class="creation-images" id="photos">
        <% @post.photos.each_with_index do |photo, i| %>

          <%# Pour ajouter/enlever la photo des sélections %>
          <%= render 'photos/btn-select-photo', post: @post, photo: photo, i: i %>

        <% end %>
      </div>



    <div class="gpt">
      <%= render 'gpt_creations/recreate', gpt_creation: @gpt_creation %>

        <div class="recreer" >

          <%# Pour régénérer une description %>
          <%= form_for([@post, @gpt_creation], url: recreate_post_gpt_creation_path(@post), method: :patch) do |f| %>
          <%= f.submit "Recréer ✔️",  class:"button-recreer"%>
          <% end %>

        </div>

    </div>
  </div>

  <div class='view-insta decalage' data-display-target="view">

    <div class="instagram" id="instagram">
      <%= render "insta_show", post: @post, description: @description, photos_selected: @photos_selected %>
    </div>

    <div>
      <%= render "show_btns", post: @post %>
    </div>


  </div>

</div>
    <%# Recréer une photo %>
    <%= render "photos/btn-create-new-photo", post: @post %>

    <%# Charger une ou des photos %>
    <%= render "photos/btn-load-photos", post: @post %>

    <%# SUPPRIMER LE BROUILLON DE POST %>
    <%= link_to "Supprimer le brouillon", post_path(@post), data: {turbo_method: :delete, turbo_confirm: "Êtes-vous sûr de supprimer le brouillon ?"}, class: "btn btn-outline-danger" %>
