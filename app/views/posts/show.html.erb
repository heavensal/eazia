<% if flash[:notice] %>
  <div class="notice" style="position: absolute; top:24px; right:24px; background-color: limegreen; border: solid 2px green; padding: 16px; z-index: 1000;">
    <%= flash[:notice] %>
  </div>
<% end %>

<div class="gnration-de-la">
  <div class="frame-show">
    <div class="div-show">

      <%# TRES IMPORTANT: Canal de diffusion des changements d'images %>
      <%= turbo_stream_from "post_#{@post.id}" %>

      <div class="creation-images" id="photos">
        <% @post.photos.each_with_index do |photo, i| %>

          <%# Pour ajouter/enlever la photo des sélections etsupprimer la photo %>
          <%= render 'photos/show-photo', post: @post, photo: photo, i: i %>

        <% end %>

        <%# Recréer une photo %>
        <%= render "photos/btn-create-new-photo", post: @post %>

      </div>

      <%= image_tag("line_2.png", alt:"line") %>

      <div class="frame-description">
        <div class="description-de-post">
          <%= render 'gpt_creations/recreate', gpt_creation: @gpt_creation %>

          <%# Pour régénérer une description %>
          <%= form_for([@post, @gpt_creation], url: recreate_post_gpt_creation_path(@post), method: :patch) do |f| %>
          <%= f.submit "Générer un nouveau post",  class:"secondary-bouton"%>
          <% end %>

        </div>
      </div>

    </div>

    <div class="view-insta">
        <%= render "insta_show", post: @post, description: @description, photos_selected: @photos_selected %>
        <%= render "show_btns", post: @post %>
    </div>

  </div>

    <%# SUPPRIMER LE BROUILLON DE POST %>
    <%= link_to "Supprimer le brouillon", post_path(@post), data: {turbo_method: :delete, turbo_confirm: "Êtes-vous sûr de supprimer le brouillon ?"}, class: "btn btn-outline-danger" %>
</div>
